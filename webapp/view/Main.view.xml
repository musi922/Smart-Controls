<mvc:View xmlns:form="sap.ui.layout.form" xmlns:f="sap.f"
          controllerName="lazyloading.controller.Main"
          displayBlock="true"
          xmlns="sap.m"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns:core="sap.ui.core"
          xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
          xmlns:smarttable="sap.ui.comp.smarttable"
          core:require="{
                formatter: 'lazyloading/model/formatter'
          }">

    <Page title="{i18n>appTitle}" id="page">
        <customHeader>
            <Toolbar>
                <Button icon="sap-icon://menu2"/>
                <Avatar src="./images/logo.webp"/>
                <MenuButton text="Moyo Tech"/>
                <ToolbarSpacer/>
                <SearchField placeholder="search .." width="auto" id="mainSearch" liveChange="onLiveSearch"/>
                 <ToolbarSpacer/>
                 <Link text="Orders" press="onOrdersPres"/>
                <ToolbarSpacer/>
                <Button icon="sap-icon://customer" type="Transparent"/>
                <Button icon="sap-icon://feedback" type="Transparent"/>
                <Button icon="sap-icon://user-settings" type="Transparent"/>
                <Button icon="sap-icon://log" type="Transparent" press="onLogoutPress"/>
                <Avatar initials="MR" press="onAvatarPress"/>
            </Toolbar>
        </customHeader>

        <content>
            <IconTabBar id="mainTabBar"
                        select="onTabSelect"
                        selectedKey="{view>/selectedTabKey}">
                <items>
                    <IconTabFilter id="productsTab" text="Products" key="Products">
                    <Toolbar >
                    <ToolbarSpacer/>
                    <Button text="Create Product" press="onCreateProductPress"></Button>
                    </Toolbar>
                        <smartfilterbar:SmartFilterBar id="smartFilterBar" entitySet="Products">
                            <smartfilterbar:controlConfiguration>
                                <smartfilterbar:ControlConfiguration id="idProduct" label="ID" key="ID" visibleInAdvancedArea="true"/>
                                <smartfilterbar:ControlConfiguration id="idProductName" label="Name" key="Name" visibleInAdvancedArea="true"/>
                                <smartfilterbar:ControlConfiguration id="idDescription" label="Description" key="Description" visibleInAdvancedArea="true"/>
                            </smartfilterbar:controlConfiguration>
                        </smartfilterbar:SmartFilterBar>

                       <smarttable:SmartTable id="idSmartTable" entitySet="Products" smartFilterId="smartFilterBar" enableAutoBinding="true"
                       tableType="ResponsiveTable" initiallyVisibleFields="ID,Name,Description">
    <Table id="idTable" selectionChange="handleSelectionChange" mode="SingleSelectMaster" growing="true" growingScrollToLoad="true" growingThreshold="18">
        <columns>
            <Column>
                <Text text="Actions"/>
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <cells>

                    <HBox>
                        <Button text="Edit" type="Emphasized" press="onEditPress" />
                        <Button text="Delete" type="Negative" press="onDeletePress" />
                    </HBox>
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</smarttable:SmartTable>

                    </IconTabFilter>

                    <IconTabFilter id="customersTab" text="Customers" key="Customers">
					<mvc:XMLView viewName="lazyloading.view.Cards"/>                   
                     </IconTabFilter>

                    <IconTabFilter id="suppliersTab" text="Suppliers" key="Suppliers">
                    <mvc:XMLView viewName="lazyloading.view.Suppliers"></mvc:XMLView>
                    </IconTabFilter>

                    <IconTabFilter id="categoriesTab" text="Categories" key="Categories">
                    </IconTabFilter>
                    
                </items>
            </IconTabBar>
            
        </content>

        <Dialog id="logoutDialog" title="{i18n>logout}">
            <Text text="Are you sure you want to log out"/>
            <beginButton>
                <Button text="Cancel" press="onCloseDialog"/>
            </beginButton>
            <endButton>
                <Button text="Logout" press="onLogoutConfirmed"/>
            </endButton>
        </Dialog>

        <Dialog id="createProduct" title="Create a Product" class="sapUiLargePadding">
        <VBox >
        <form:SimpleForm >
        <Label text="Product Id"/>
        <Input id="productIdInput"/>
        <Label text="Product Name"/>
        <Input id="productNameInput"/>
        <Label text="Descrition"/>
        <Input id="productPriceInput"/>
        <Label text="Price"/>
        <Input id="productQuantityInput"/>
        </form:SimpleForm>
        </VBox>
        <beginButton>
        <Button text="Cancel" press="onCloseProductDialog" />
        </beginButton>
        <endButton>
        <Button text="Create" press="onCreateProduct" type="Emphasized"/>
        </endButton>
        </Dialog>
    </Page>
</mvc:View>
